/*!
 * vue-gorgias v1.0.0 
 * (c) 2018 William DA SILVA
 * Released under the MIT License.
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.VueGorgias=e()}(this,function(){"use strict";function t(t,e){e.debug&&console.log("Gorgias: "+t)}var e=function(t){this.params={apiKey:null,chatId:null,injectCSS:null,debug:!1},this.BASE_URL="https://config.gorgias.io/production/";var e=Object.assign({},this.params,t);if(!e.apiKey)throw new Error("API key is missing.");if(!e.chatId)throw new Error("Chat ID is missing.");this.params=e,this.scriptTag=document.createElement("script")};e.prototype.getScriptSrc=function(){return""+this.BASE_URL+this.params.apiKey+"/chat/"+this.params.chatId+".js"},e.prototype.inject=function(){if("undefined"==typeof window)throw new Error("Could not inject Gorgias script in the DOM.");window.gorgiasChatParameters={};var t=document.createElement("div");t.setAttribute("id","gorgias-chat"),this.scriptTag.setAttribute("src",this.getScriptSrc()),this.scriptTag.setAttribute("defer","defer"),t.appendChild(this.scriptTag),document.body.appendChild(t)},e.prototype.ready=function(e){var i=this;t("Ready function called.",this.params),"GorgiasChat"in window?(t("Script was already loaded, run callback.",this.params),this.updateCSS(),e()):this.scriptTag.addEventListener("load",function(){t("Script loaded, run callback.",i.params),i.updateCSS(),e()})},e.prototype.updateCSS=function(){if(this.params.injectCSS){var e=document.querySelector("#gorgias-web-messenger-container");if(t("Update CSS called.",this.params),e)try{var i=document.createElement("link");i.setAttribute("href",this.params.injectCSS),i.setAttribute("rel","stylesheet"),i.setAttribute("type","text/css"),e.contentDocument.head.appendChild(i)}catch(t){console.error("Gorgias: Could not append CSS in Gorgias iframe.",t)}}},e.prototype.updateUser=function(e){var i=this;"undefined"!=typeof window&&"Smooch"in window&&(t("Update user requested.",this.params),window.Smooch.on("ready",function(){t("Smooch is ready, can request update.",i.params),window.Smooch.updateUser(e).then(function(){t("User data update done.",i.params)}).catch(function(t){console.error("Gorgias: ",t)})}))};var i=function(t,i){var r=new e(i);r.inject(),t.gorgias=r},r={install:i,version:"1.0.0"};return"undefined"!=typeof window&&window.Vue&&window.Vue.use(r),r});